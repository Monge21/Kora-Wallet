{
  "entities": {
    "Shop": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Shop",
      "type": "object",
      "description": "Represents a Shopify store connected to the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Shop entity."
        },
        "shopifyStoreId": {
          "type": "string",
          "description": "The Shopify store ID."
        },
        "name": {
          "type": "string",
          "description": "The name of the Shopify store."
        },
        "domain": {
          "type": "string",
          "description": "The domain of the Shopify store."
        },
        "accessToken": {
          "type": "string",
          "description": "The access token used to authenticate with the Shopify store. Treat with extreme caution."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the shop was connected.",
          "format": "date-time"
        },
        "plan": {
          "type": "string",
          "description": "The subscription plan for the shop.",
          "enum": [
            "basic",
            "growth",
            "pro"
          ]
        },
        "chargeId": {
          "type": "string",
          "description": "The ID of the active Shopify subscription charge."
        }
      },
      "required": [
        "id",
        "shopifyStoreId",
        "name",
        "domain",
        "accessToken"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Kora Wallet application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the user."
        },
        "shopId": {
          "type": "string",
          "description": "Reference to Shop. (Relationship: Shop 1:N User)"
        }
      },
      "required": [
        "id",
        "email",
        "shopId"
      ]
    },
    "DiscountCode": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DiscountCode",
      "type": "object",
      "description": "Represents a discount code created within the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the DiscountCode entity."
        },
        "shopId": {
          "type": "string",
          "description": "Reference to Shop. (Relationship: Shop 1:N DiscountCode)"
        },
        "code": {
          "type": "string",
          "description": "The discount code itself."
        },
        "type": {
          "type": "string",
          "description": "The type of discount (e.g., percentage, fixed amount).",
          "enum": ["Percentage", "Fixed Amount", "Free Shipping"]
        },
        "value": {
          "type": "number",
          "description": "The value of the discount."
        },
        "startsAt": {
          "type": "string",
          "description": "The date and time when the discount code becomes active.",
          "format": "date-time"
        },
        "expiresAt": {
          "type": "string",
          "description": "The date and time when the discount code expires.",
          "format": "date-time"
        },
        "usageLimit": {
          "type": "number",
          "description": "The maximum number of times the discount code can be used."
        }
      },
      "required": [
        "id",
        "shopId",
        "code",
        "type",
        "value",
        "startsAt"
      ]
    },
    "SalesPrediction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SalesPrediction",
      "type": "object",
      "description": "Represents a sales prediction generated by the AI.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the SalesPrediction entity."
        },
        "shopId": {
          "type": "string",
          "description": "Reference to Shop. (Relationship: Shop 1:N SalesPrediction)"
        },
        "productId": {
          "type": "string",
          "description": "The ID of the product for which the sales are predicted."
        },
        "predictedSales": {
          "type": "number",
          "description": "The predicted sales quantity."
        },
        "predictionDate": {
          "type": "string",
          "description": "The date for which the sales are predicted.",
          "format": "date-time"
        },
        "confidenceLevel": {
          "type": "number",
          "description": "The confidence level of the prediction (e.g., 0.95 for 95%)."
        }
      },
      "required": [
        "id",
        "shopId",
        "productId",
        "predictedSales",
        "predictionDate"
      ]
    },
    "PricingSuggestion": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PricingSuggestion",
      "type": "object",
      "description": "Represents a pricing suggestion generated by the AI.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the PricingSuggestion entity."
        },
        "shopId": {
          "type": "string",
          "description": "Reference to Shop. (Relationship: Shop 1:N PricingSuggestion)"
        },
        "productId": {
          "type": "string",
          "description": "The ID of the product for which the pricing is suggested."
        },
        "suggestedPrice": {
          "type": "number",
          "description": "The suggested price for the product."
        },
        "suggestionDate": {
          "type": "string",
          "description": "The date when the pricing suggestion was generated.",
          "format": "date-time"
        },
        "reasoning": {
          "type": "string",
          "description": "The reasoning behind the pricing suggestion (AI explanation)."
        }
      },
      "required": [
        "id",
        "shopId",
        "productId",
        "suggestedPrice",
        "suggestionDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/shops/{shopId}": {
      "schema": {
        "$ref": "#/entities/Shop"
      },
      "description": "Stores information about Shopify stores connected to the application."
    },
    "/shops/{shopId}/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Stores user information for each shop. Includes denormalized 'shopId' for authorization independence."
    },
    "/shops/{shopId}/discount_codes/{discountCodeId}": {
      "schema": {
        "$ref": "#/entities/DiscountCode"
      },
      "description": "Stores discount codes created for each shop. Includes denormalized 'shopId' for authorization independence."
    },
    "/shops/{shopId}/sales_predictions/{salesPredictionId}": {
      "schema": {
        "$ref": "#/entities/SalesPrediction"
      },
      "description": "Stores sales predictions for each shop. Includes denormalized 'shopId' for authorization independence."
    },
    "/shops/{shopId}/pricing_suggestions/{pricingSuggestionId}": {
      "schema": {
        "$ref": "#/entities/PricingSuggestion"
      },
      "description": "Stores pricing suggestions for each shop. Includes denormalized 'shopId' for authorization independence."
    }
  }
}